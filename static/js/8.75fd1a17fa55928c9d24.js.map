{"version":3,"sources":["webpack:///./src/page/demo.vue","webpack:///./src/page/demo.vue?322e","webpack:///./src/page/demo.vue?4ff7","webpack:///./src/assets/images/drag/resize.png","webpack:///./src/assets/images/drag/close.png","webpack:///./src/assets/images/drag/rotate.png"],"names":["page_demo","data","drag_list","w","h","x","y","draggable","rotate","show","show_control","cur_drag","p_x","p_y","methods","get_drag_idx","idx","i","this","onstart","e","parent_class","target","offsetParent","className","split","cur_idx","length","replace","console","log","offsetWidth","toFixed","offsetHeight","changedTouches","clientX","clientY","onmove","getAngle","onend","mx","my","_this","px","py","Math","abs","cos","sqrt","pow","radina","acos","angle","floor","PI","$nextTick","onDrag","onResize","close_drag","index","selectortype_template_index_0_src_page_demo","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","key","class","style","transform","attrs","class-name-handle","handles","parent","on","dragging","resizing","src","__webpack_require__","click","$event","_e","_v","touchstart","stopPropagation","touchmove","touchend","slot","alt","staticRenderFns","Component","normalizeComponent","ssrContext","__webpack_exports__","module","exports","p"],"mappings":"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","file":"static/js/8.75fd1a17fa55928c9d24.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      drag_list: [\r\n        {\r\n          w: 100,\r\n          h: 100,\r\n          x: 25,\r\n          y: 25,\r\n          draggable: false,\r\n          rotate: 0,\r\n          show: true,\r\n          show_control: false\r\n        },\r\n        {\r\n          w: 100,\r\n          h: 100,\r\n          x: 225,\r\n          y: 225,\r\n          draggable: false,\r\n          rotate: 0,\r\n          show: true,\r\n          show_control: false\r\n        }\r\n      ],\r\n      cur_drag: 0,\r\n      p_x: 0,\r\n      p_y: 0\r\n    };\r\n  },\r\n  methods: {\r\n    get_drag_idx(idx) {\r\n      this.cur_drag = idx;\r\n      this.drag_list[idx].draggable = true;\r\n      for (var i in this.drag_list) {\r\n        this.drag_list[i].show_control = false;\r\n      }\r\n      this.drag_list[idx].show_control = true;\r\n    },\r\n    onstart(e) {\r\n      var parent_class = e.target.offsetParent.offsetParent.className.split(\r\n        \" \"\r\n      );\r\n      var cur_idx = parent_class[parent_class.length - 1].replace(/resize/, \"\");\r\n      this.drag_list[cur_idx].draggable = false;\r\n      this.cur_drag = cur_idx;\r\n      console.log(cur_idx, this.drag_list[cur_idx].draggable);\r\n      var w = (e.target.offsetWidth / 2).toFixed(0);\r\n      var h = (e.target.offsetHeight / 2).toFixed(0);\r\n      this.p_x = e.changedTouches[0].clientX;\r\n      this.p_y = e.changedTouches[0].clientY;\r\n    },\r\n    onmove(e) {\r\n      this.getAngle(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\r\n    },\r\n    onend() {\r\n      this.drag_list[this.cur_drag].draggable = true;\r\n    },\r\n    getAngle(mx, my) {\r\n      var px = this.p_x;\r\n      var py = this.p_y;\r\n      var x = Math.abs(px - mx);\r\n      var y = Math.abs(py - my);\r\n      var z = Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2));\r\n      var cos = y / z;\r\n      var radina = Math.acos(cos); //用反三角函数求弧度\r\n      var angle = Math.floor(180 / (Math.PI / radina)); //将弧度转换成角度\r\n      if (mx > px && my > py) {\r\n        //鼠标在第四象限\r\n        angle = 180 - angle;\r\n      }\r\n      if (mx == px && my > py) {\r\n        //鼠标在y轴负方向上\r\n        angle = 180;\r\n      }\r\n      if (mx > px && my == py) {\r\n        //鼠标在x轴正方向上\r\n        angle = 90;\r\n      }\r\n      if (mx < px && my > py) {\r\n        //鼠标在第三象限\r\n        angle = 180 + angle;\r\n      }\r\n      if (mx < px && my == py) {\r\n        //鼠标在x轴负方向\r\n        angle = 270;\r\n      }\r\n      if (mx < px && my < py) {\r\n        //鼠标在第二象限\r\n        angle = 360 - angle;\r\n      }\r\n      this.$nextTick(() => {\r\n        this.drag_list[this.cur_drag].rotate = angle-20;\r\n      });\r\n    },\r\n    //   移动触发\r\n    onDrag(x, y) {\r\n      this.drag_list[this.cur_drag].x = x;\r\n      this.drag_list[this.cur_drag].y = y;\r\n    },\r\n    //放大缩小时 触发\r\n    onResize(x, y, w, h) {\r\n      this.drag_list[this.cur_drag].x = x;\r\n      this.drag_list[this.cur_drag].y = y;\r\n      this.drag_list[this.cur_drag].w = w;\r\n      this.drag_list[this.cur_drag].h = h;\r\n    },\r\n    close_drag(index) {\r\n      this.drag_list[index].show = false;\r\n      console.log(this.drag_list[index]);\r\n    }\r\n  }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/page/demo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page_box\"},_vm._l((_vm.drag_list),function(item,index){return _c('drag_resize',{key:index,class:[item.show?'d_block':'d_none','resize'+index ],style:({'transform':'rotate('+item.rotate+'deg)'}),attrs:{\"class-name-handle\":\"resize_item\",\"handles\":['br'],\"w\":item.w,\"h\":item.h,\"x\":item.x,\"y\":item.y,\"draggable\":item.draggable,\"parent\":true},on:{\"dragging\":_vm.onDrag,\"resizing\":_vm.onResize}},[(item.show_control)?_c('img',{staticClass:\"w50 close_drag_item\",attrs:{\"src\":require(\"@/assets/images/drag/close.png\")},on:{\"click\":function($event){return _vm.close_drag(index)}}}):_vm._e(),_vm._v(\" \"),(item.show_control)?_c('div',{staticClass:\"w50 close_drag_item rotate_drag_item size0\"},[_c('img',{staticClass:\"w_100\",attrs:{\"src\":require(\"@/assets/images/drag/rotate.png\")},on:{\"touchstart\":function($event){$event.stopPropagation();return _vm.onstart($event)},\"touchmove\":function($event){$event.stopPropagation();return _vm.onmove($event)},\"touchend\":function($event){$event.stopPropagation();return _vm.onend($event)}}})]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"w_100 h_100 drag_mask_box\",on:{\"touchstart\":function($event){return _vm.get_drag_idx(index)}}}),_vm._v(\" \"),(item.show_control)?_c('div',{attrs:{\"slot\":\"br\"},slot:\"br\"},[_c('img',{staticClass:\"w50\",attrs:{\"src\":require(\"@/assets/images/drag/resize.png\"),\"alt\":\"\"}})]):_vm._e()])}),1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-10ccb76e\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!./node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/demo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-10ccb76e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/_vux-loader@1.2.9@vux-loader/src/style-loader.js!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./demo.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./demo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/_vux-loader@1.2.9@vux-loader/src/script-loader.js!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./demo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-10ccb76e\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/_vux-loader@1.2.9@vux-loader/src/before-template-compiler-loader.js!../../node_modules/_vux-loader@1.2.9@vux-loader/src/template-loader.js!../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./demo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/demo.vue\n// module id = null\n// module chunks = ","module.exports = __webpack_public_path__ + \"static/img/resize.2bb9444.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/drag/resize.png\n// module id = E21T\n// module chunks = 8","module.exports = __webpack_public_path__ + \"static/img/close.b986d60.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/drag/close.png\n// module id = pErC\n// module chunks = 8","module.exports = __webpack_public_path__ + \"static/img/rotate.9d03c5e.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/drag/rotate.png\n// module id = vFRA\n// module chunks = 8"],"sourceRoot":""}